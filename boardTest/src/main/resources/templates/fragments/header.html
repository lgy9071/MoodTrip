<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>header</title>
</head>
<body>
<header th:fragment="siteHeader(active)">
    <div style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;">

        <!-- ì¢Œì¸¡: ë¡œê³  -->
        <a href="/" th:text="#{app.title}" style="text-decoration:none;color:#222;font-weight:700;font-size:20px;">MoodTrip</a>

        <!-- ì¤‘ì•™: ë„¤ë¹„ -->
        <nav style="display:flex;gap:12px;flex:1;justify-content:center;">
            <a href="/trips"   th:text="#{nav.trips}">ì—¬í–‰</a>
            <a href="/places"  th:text="#{nav.places}">ë§›ì§‘</a>
            <a href="/reviews" th:text="#{nav.reviews}">ë¦¬ë·°</a>
            <a href="/coming-soon" th:text="#{nav.videos}">ì˜ìƒ</a>
            <a href="/coming-soon" th:text="#{nav.products}">ìš©í’ˆ</a>
<!--            <a th:href="@{/places(favoritesOnly=true)}">ë‚´ ì¦ê²¨ì°¾ê¸°</a>-->
        </nav>

        <!-- ìš°ì¸¡: ë¡œê·¸ì¸/ì–¸ì–´ ë“œë¡­ë‹¤ìš´ -->
        <div style="display:flex;align-items:center;gap:12px;position:relative;">

            <!-- ë¡œê·¸ì¸ ìƒíƒœ -->
            <span th:if="${session.LOGIN_USER == null}">
        <a href="/login"  th:text="#{auth.login}"  style="margin-right:6px;">ë¡œê·¸ì¸</a>
        <a href="/signup" th:text="#{auth.signup}">íšŒì›ê°€ì…</a>
      </span>
            <span th:if="${session.LOGIN_USER != null}">
        <form th:action="@{/logout}" method="post" style="display:inline;">
          <button type="submit" th:text="#{auth.logout}" style="background:#1976d2;color:#fff;border:none;border-radius:6px;padding:6px 10px;cursor:pointer;">ë¡œê·¸ì•„ì›ƒ</button>
        </form>
      </span>

            <!-- ì–¸ì–´ ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
            <div class="lang-dropdown">
                <button class="lang-toggle">
                    ğŸŒ <span th:text="${#locale.language?.toUpperCase()}">KO</span> â–¼
                </button>
                <div class="lang-menu">
                    <a th:href="@{?lang=ko}" th:classappend="${#locale.language=='ko'} ? 'active'">KO</a>
                    <a th:href="@{?lang=en}" th:classappend="${#locale.language=='en'} ? 'active'">EN</a>
                    <a th:href="@{?lang=uk}" th:classappend="${#locale.language=='uk'} ? 'active'">UK</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¡œê·¸ì•„ì›ƒ ì•ˆë‚´ -->
    <div th:if="${param.loggedOut}"
         style="margin-top:8px;background:#f5faff;border:1px solid #d6e9ff;color:#184a8b;padding:8px 10px;border-radius:8px;">
        ì •ìƒì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.
    </div>

    <style>
        header a { color:#333; text-decoration:none; padding:6px 8px; border-radius:6px }
        header a.active { background:#1976d2; color:#fff }
        header button { background:#1976d2; color:#fff; border:none; border-radius:6px; padding:6px 10px; cursor:pointer }

        /* ì–¸ì–´ ë“œë¡­ë‹¤ìš´ */
        .lang-dropdown {
          position:relative;
          display:inline-block; /* hover ë²”ìœ„ ì•ˆì •í™” */
        }
        .lang-toggle {
          background:transparent;
          border:1px solid #ddd;
          border-radius:6px;
          padding:4px 8px;
          font-size:12px;
          cursor:pointer;
          color:#444;
          line-height:1;           /* ë¼ì¸ë°•ìŠ¤ ì—¬ë°± ìµœì†Œí™” */
        }
        .lang-toggle:hover { background:#f8f9fa; }

        .lang-menu {
          position:absolute;
          right:0;
          top:100%;                /* ë²„íŠ¼ ë°”ë¡œ ì•„ë˜ì— â€˜ë°€ì°©â€™ */
          margin-top:0;            /* ê°„ê²© ì œê±° */
          background:#fff;
          border:1px solid #ddd;
          border-radius:6px;
          box-shadow:0 4px 10px rgba(0,0,0,.08);
          z-index:10;
          min-width:70px;

          /* ì´ˆê¸°ì—” ìˆ¨ê¹€ + ìŠ¬ë¼ì´ë“œë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜ ì¤€ë¹„ */
          display:block;           /* íŠ¸ëœì§€ì…˜ ìœ„í•´ block ìœ ì§€ */
          opacity:0;
          visibility:hidden;
          transform:translateY(-6px) scaleY(.98);
          transform-origin:top;
          transition:
            opacity .18s ease,
            transform .18s ease,
            visibility 0s linear .18s; /* ë‹«í ë•Œë§Œ ì§€ì—° */
        }
        .lang-menu a {
          display:block;
          padding:6px 10px;
          font-size:12px;
          color:#333;
          text-decoration:none;
          white-space:nowrap;
        }
        .lang-menu a:hover { background:#f1f5f9; }
        .lang-menu a.active { background:#1976d2; color:#fff; }

        /* hover ë˜ëŠ” í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ë¡œ ì—´ê¸° */
        .lang-dropdown:hover .lang-menu,
        .lang-dropdown:focus-within .lang-menu {
          opacity:1;
          visibility:visible;
          transform:translateY(0) scaleY(1);
          transition:
            opacity .18s ease,
            transform .18s ease,
            visibility 0s; /* ì—´ë¦´ ë•Œ ì¦‰ì‹œ ë³´ì´ê¸° */
        }

        /* í˜¹ì‹œ ëª¨ë¥¼ 1~2px ëŠê¹€ ë°©ì§€ìš©(íˆ¬ëª… íˆíŠ¸ì¡´) - í•„ìš” ì—†ìœ¼ë©´ ì œê±°í•´ë„ ë¨ */
        .lang-dropdown::after {
          content:"";
          position:absolute;
          left:0; right:0;
          top:100%;
          height:2px;              /* ì‹œê°ì  ê³µê°„ì€ 0, hoverë§Œ ì´ì–´ì¤Œ */
        }
    </style>
</header>
</body>
</html>
