<!-- src/main/resources/templates/trips/new.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8"/>
    <title>여행 계획 등록</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 24px; }
        form { max-width: 720px; display: grid; gap: 16px; }
        label { font-weight: 600; }
        input[type=text], input[type=date], input[type=number], textarea {
          width: 100%; padding: 8px; border:1px solid #ddd; border-radius: 6px;
        }
        textarea { min-height: 80px; }
        .btn { padding: 8px 12px; border: none; background:#0064ff; color:white; border-radius:6px; cursor:pointer; }
        .err { color:#c22727; font-size: 0.9em; }
        .card { border:1px solid #eee; border-radius:10px; padding:16px; background:#fafafa; }
        .muted { color:#666; font-size: 0.9em; }
    </style>
</head>
<body>
<div th:replace="~{fragments/header :: siteHeader('trips')}"></div>

<main style="padding:16px 0;">

<h1>여행 계획 등록</h1>

<form th:action="@{/trips}" method="post" th:object="${form}">
    <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>

    <!-- 기본 정보 -->
    <div class="card">
        <h3>기본 정보</h3>
        <div>
            <label>제목</label>
            <input type="text" th:field="*{title}" placeholder="예) 오사카 2박 3일"/>
            <div class="err" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div>
                <label>시작일</label>
                <input type="date" th:field="*{startDate}"/>
                <div class="err" th:if="${#fields.hasErrors('startDate')}" th:errors="*{startDate}"></div>
            </div>
            <div>
                <label>종료일</label>
                <input type="date" th:field="*{endDate}"/>
                <div class="err" th:if="${#fields.hasErrors('endDate')}" th:errors="*{endDate}"></div>
                <div class="err" th:if="${#fields.hasGlobalErrors()}">
                    <span th:each="e: ${#fields.globalErrors()}" th:text="${e}"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- 초기 경유지 (선택) -->
    <div class="card">
        <h3>초기 경유지 추가 <span class="muted">(선택)</span></h3>
        <div style="display:grid; grid-template-columns: 120px 1fr 1fr; gap: 12px;">
            <div>
                <label>일차</label>
                <input type="number" min="1" th:field="*{initialDayOrder}" placeholder="1"/>
            </div>
            <div>
                <label>장소명</label>
                <input type="text" th:field="*{initialPlaceName}" placeholder="예) 도톤보리"/>
            </div>
            <div>
                <label>비용(원)</label>
                <input type="number" min="0" step="0.01" th:field="*{initialCost}" placeholder="예) 12000"/>
            </div>
        </div>
        <div>
            <label>주소(선택)</label>
            <input type="text" th:field="*{initialAddress}" placeholder="예) 오사카부 오사카시…"/>
        </div>
        <div>
            <label>메모</label>
            <textarea th:field="*{initialMemo}" placeholder="추천 메뉴, 입장시간 등"></textarea>
        </div>
        <div class="muted">※ 장소명을 입력하면 초기 경유지 1개가 함께 저장됩니다.</div>
    </div>

    <div style="display:flex; gap:8px;">
        <button class="btn" type="submit">등록</button>
        <a th:href="@{/trips}" style="color:#0064ff; text-decoration:none;">목록</a>
    </div>
</form>
</main>

<div th:replace="~{fragments/footer :: siteFooter}"></div>
</body>
</html>
