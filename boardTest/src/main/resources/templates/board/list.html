<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>영화 목록</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="header">
  <form class="search-bar" method="get" action="/board/search">
    <input type="text" name="keyword" th:value="${keyword}" placeholder="검색어 입력">
    <button type="submit">검색</button>
  </form>
  <form method="post" th:action="@{/logout}" class="logout">
    <button type="submit">로그아웃</button>
  </form>
</div>

<h1>영화 목록</h1>
<a href="/board/new" class="button-link">영화 작성</a>
<a href="/reviews" class="button-link">리뷰 목록</a>

<div class="card-container">
  <div class="card" th:each="p : ${postPage.content}">
    <img th:if="${p.imageUrl}" th:src="${p.imageUrl}" alt="포스터" class="card-img">
    <div class="card-body">
      <h3><a th:href="@{/board/{id}(id=${p.id})}" th:text="${p.title}"></a></h3>
      <p th:text="${p.author != null ? p.author.username : '알 수 없음'}"></p>
      <p th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd')}"></p>
    </div>
  </div>
</div>

<div class="pagination">
  <span th:each="i : ${#numbers.sequence(0, totalPages-1)}">
    <a th:if="${i != currentPage}" th:href="@{/board(page=${i})}" th:text="${i+1}"></a>
    <span th:if="${i == currentPage}" th:text="${i+1}"></span>
  </span>
</div>
</body>
</html>
