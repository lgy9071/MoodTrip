<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>header</title>
</head>
<body>
<header th:fragment="siteHeader(active)" class="site-header">
    <div class="wrap site-header__bar">

        <!-- ì¢Œì¸¡: ë¡œê³  -->
        <a href="/" th:text="#{app.title}" class="brand">MoodTrip</a>

        <!-- ì¤‘ì•™: ë„¤ë¹„ -->
        <nav class="nav">
            <a href="/trips"   th:classappend="${active}=='trips' ? ' active'"   th:text="#{nav.trips}">ì—¬í–‰</a>
            <a href="/places"  th:classappend="${active}=='places' ? ' active'"  th:text="#{nav.places}">ë§›ì§‘</a>
            <a href="/reviews" th:classappend="${active}=='reviews' ? ' active'" th:text="#{nav.reviews}">ë¦¬ë·°</a>
            <a href="/coming-soon" th:text="#{nav.videos}">ì˜ìƒ</a>
            <a href="/coming-soon" th:text="#{nav.products}">ìš©í’ˆ</a>
        </nav>

        <!-- ìš°ì¸¡: ë¡œê·¸ì¸/ì–¸ì–´ -->
        <div class="header-ops">
            <span th:if="${session.LOGIN_USER == null}">
                <a href="/login"  th:text="#{auth.login}">ë¡œê·¸ì¸</a>
                <a href="/signup" th:text="#{auth.signup}">íšŒì›ê°€ì…</a>
            </span>
            <span th:if="${session.LOGIN_USER != null}">
                <form th:action="@{/logout}" method="post" style="display:inline">
                    <button type="submit" class="btn btn-primary" th:text="#{auth.logout}">ë¡œê·¸ì•„ì›ƒ</button>
                </form>
            </span>

            <div class="lang-dropdown">
                <button class="lang-toggle">
                    ğŸŒ <span th:text="${#locale.language?.toUpperCase()}">KO</span> â–¼
                </button>
                <div class="lang-menu">
                    <a th:href="@{?lang=ko}" th:classappend="${#locale.language=='ko'} ? 'active'">KO</a>
                    <a th:href="@{?lang=en}" th:classappend="${#locale.language=='en'} ? 'active'">EN</a>
                    <a th:href="@{?lang=uk}" th:classappend="${#locale.language=='uk'} ? 'active'">UK</a>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${param.loggedOut}" class="wrap msg">
        ì •ìƒì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.
    </div>

    <!-- header ì „ìš© ìµœì†Œ ìŠ¤íƒ€ì¼(ê³µí†µ base.css ê¸°ì¤€ìœ¼ë¡œ ê°€ë³ê²Œ ë³´ì •ë§Œ) -->
    <style>
        header a { color:#333; text-decoration:none; padding:6px 8px; border-radius:6px }
        header a.active { background:#1976d2; color:#fff }
        header button { background:#1976d2; color:#fff; border:none; border-radius:6px; padding:6px 10px; cursor:pointer }

        /* ì–¸ì–´ ë“œë¡­ë‹¤ìš´ */
        .lang-dropdown {
          position:relative;
          display:inline-block;
        }
        .lang-toggle {
          background:transparent;
          border:1px solid #ddd;
          border-radius:6px;
          padding:4px 8px;
          font-size:12px;
          cursor:pointer;
          color:#444;
          line-height:1;
        }
        .lang-toggle:hover { background:#f8f9fa; }

        .lang-menu {
          position:absolute;
          right:0;
          top:100%;
          margin-top:0;
          background:#fff;
          border:1px solid #ddd;
          border-radius:6px;
          box-shadow:0 4px 10px rgba(0,0,0,.08);
          z-index:10;
          min-width:70px;

          display:block;
          opacity:0;
          visibility:hidden;
          transform:translateY(-6px) scaleY(.98);
          transform-origin:top;
          transition:
            opacity .18s ease,
            transform .18s ease,
            visibility 0s linear .18s;
        }
        .lang-menu a {
          display:block;
          padding:6px 10px;
          font-size:12px;
          color:#333;
          text-decoration:none;
          white-space:nowrap;
        }
        .lang-menu a:hover { background:#f1f5f9; }
        .lang-menu a.active { background:#1976d2; color:#fff; }

        .lang-dropdown:hover .lang-menu,
        .lang-dropdown:focus-within .lang-menu {
          opacity:1;
          visibility:visible;
          transform:translateY(0) scaleY(1);
          transition:
            opacity .18s ease,
            transform .18s ease,
            visibility 0s;
        }

        .lang-dropdown::after {
          content:"";
          position:absolute;
          left:0; right:0;
          top:100%;
          height:2px;
        }
    </style>
</header>
</body>
</html>
